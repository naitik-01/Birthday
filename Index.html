<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>A Special Surprise for You ‚ù§Ô∏è</title>

    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <style>
        html, body { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            background: #ffe; overflow: hidden; 
            display: flex; justify-content: center; align-items: center;
            position: relative;
        }

        #watermark-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 1; pointer-events: none; display: none;
            flex-wrap: wrap; justify-content: space-around; align-content: space-around;
            opacity: 0.05;
        }
        .watermark-item { font-family: 'Dancing Script', cursive; font-size: 30px; padding: 30px; color: #ff4d4d; }

        #start-btn { 
            position: fixed; 
            z-index: 9999; 
            top: 50%; left: 50%; transform: translate(-50%, -50%);
            padding: 18px 35px; font-size: 22px; border-radius: 50px; 
            border: none; background: #ff4d4d; color: white; cursor: pointer;
            box-shadow: 0 8px 25px rgba(255, 77, 77, 0.4);
            font-family: 'Dancing Script', cursive;
        }

        #main { width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; }

        #wrap { 
            position: relative; width: 1100px; height: 680px; 
            transform-origin: center center;
            z-index: 2;
        }

        #text { 
            position: absolute; width: 500px; left: 60px; top: 60px; 
            color: #444; font-size: 20px; line-height: 1.8; z-index: 10;
        }
        #code { display: none; }

        #clock-box { 
            position: absolute; left: 60px; top: 520px; font-size: 24px; 
            display: none; color: #ff758c; font-weight: bold; z-index: 10;
            background: rgba(255, 255, 238, 0.9); padding: 12px; border-radius: 12px;
        }

        canvas { display: block; margin: 0 auto; }

        /* RESPONSIVE SCALING */
        @media screen and (max-width: 1100px) { #wrap { transform: scale(0.6); } }
        @media screen and (max-width: 768px) {
            #wrap { transform: scale(0.45); }
            #text { font-size: 28px; width: 650px; }
            #clock-box { font-size: 30px; width: 550px; }
        }
        @media screen and (max-width: 480px) { #wrap { transform: scale(0.33); } }
    </style>
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/Real-Sam/her-birthday@main/file/jscex.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/Real-Sam/her-birthday@main/file/jscex-parser.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/Real-Sam/her-birthday@main/file/jscex-jit.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/Real-Sam/her-birthday@main/file/jscex-builderbase.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/Real-Sam/her-birthday@main/file/jscex-async.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/Real-Sam/her-birthday@main/file/jscex-async-powerpack.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/Real-Sam/her-birthday@main/file/function.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/Real-Sam/her-birthday@main/file/love.js"></script>
</head>
<body>

    <button id="start-btn" onclick="initSurprise()">‚ù§Ô∏è Click for Surprise</button>

    <div id="watermark-container">
        <div class="watermark-item">HAPPY BIRTHDAY TULI</div>
        <div class="watermark-item">HAPPY BIRTHDAY TULI</div>
        <div class="watermark-item">HAPPY BIRTHDAY TULI</div>
        <div class="watermark-item">HAPPY BIRTHDAY TULI</div>
        <div class="watermark-item">HAPPY BIRTHDAY TULI</div>
    </div>

    <audio id="myAudio" loop>
        <source src="Diamond.mp3" type="audio/mp3">
    </audio>

    <div id="main">
        <div id="wrap">
            <div id="text">
                <div id="code">
                    <span class="say">Hey you üíû</span><br>
                    <span class="say">Happy Birthday üéà</span><br>
                    <span class="say">I‚Äôm sorry I haven't been there lately..üòî</span><br>
                    <span class="say">And for the time I couldn't give you.‚è≥</span><br>
                    <span class="say">You deserve the world, and I promise to do better.‚ù§Ô∏è</span><br>
                    <span class="say">I hope today is as beautiful as you are.üòä</span><br>
                    <span class="say">Always yours. üòôüíï</span><br><br>
                    <span class="say">Love You üòôüòô</span>
                </div>
            </div>
            <div id="clock-box">
                Countdown to your big day:<br>
                <span id="clock"></span>
            </div>
            <canvas id="canvas" width="1100" height="680"></canvas>
        </div>
    </div>

    <script>
    function initSurprise() {
        $("#watermark-container").fadeIn(2000).css("display", "flex");
        $("#start-btn").remove();

        var audio = document.getElementById('myAudio');
        // Ensure audio plays correctly on all devices
        var playPromise = audio.play();
        if (playPromise !== undefined) {
            playPromise.then(_ => {}).catch(error => {
                console.log("Auto-play was prevented");
            });
        }
        startAnimation();
    }

    function startAnimation() {
        var canvas = $('#canvas');
        var width = canvas.width();
        var height = canvas.height();
        var targetDate = new Date("2025-12-24T00:00:00");

        var opts = {
            seed: { x: width / 2 - 20, color: "rgb(190, 26, 37)", scale: 2 },
            branch: [[535, 680, 570, 250, 500, 200, 30, 100, [
                [540, 500, 455, 417, 340, 400, 13, 100, [[450, 435, 434, 430, 394, 395, 2, 40]]],
                [550, 445, 600, 356, 680, 345, 12, 100, [[578, 400, 648, 409, 661, 426, 3, 80]]],
                [539, 281, 537, 248, 534, 217, 3, 40],
                [546, 397, 413, 247, 328, 244, 9, 80, [
                    [427, 286, 383, 253, 371, 205, 2, 40],
                    [498, 345, 435, 315, 395, 330, 4, 60]
                ]],
                [546, 357, 608, 252, 678, 221, 6, 100, [[590, 293, 646, 277, 648, 271, 2, 80]]]
            ]]],
            bloom: { num: 700, width: 1080, height: 650 },
            footer: { width: 1200, height: 5, speed: 10 }
        };

        var tree = new Tree(canvas[0], width, height, opts);
        var seed = tree.seed;
        var foot = tree.footer;

        var runAsync = eval(Jscex.compile("async", function () {
            $await(seedAnimate());
            $await(growAnimate());
            $await(flowAnimate());
            $await(moveAnimate());
            textAnimate().start();
        }));

        var seedAnimate = eval(Jscex.compile("async", function () {
            seed.draw();
            while (seed.canScale()) { seed.scale(0.95); $await(Jscex.Async.sleep(10)); }
            while (seed.canMove()) { seed.move(0, 2); foot.draw(); $await(Jscex.Async.sleep(10)); }
        }));

        var growAnimate = eval(Jscex.compile("async", function () {
            do { tree.grow(); $await(Jscex.Async.sleep(10)); } while (tree.canGrow());
        }));

        var flowAnimate = eval(Jscex.compile("async", function () {
            do { tree.flower(2); $await(Jscex.Async.sleep(10)); } while (tree.canFlower());
        }));

        var moveAnimate = eval(Jscex.compile("async", function () {
            tree.snapshot("p1", 240, 0, 610, 680);
            while (tree.move("p1", 500, 0)) { foot.draw(); $await(Jscex.Async.sleep(10)); }
            foot.draw();
            tree.snapshot("p2", 500, 0, 610, 680);
            canvas.parent().css("background", "url(" + tree.toDataURL('image/png') + ")");
            canvas.css("background", "#ffe");
            $await(Jscex.Async.sleep(300));
            canvas.css("background", "none");
        }));

        var textAnimate = eval(Jscex.compile("async", function () {
            $("#code").show().typewriter();
            $("#clock-box").fadeIn(500);
            while (true) {
                var current = new Date();
                var seconds = (targetDate - current) / 1000;
                if (seconds > 0) {
                    var days = Math.floor(seconds / (3600 * 24));
                    seconds = seconds % (3600 * 24);
                    var hours = Math.floor(seconds / 3600);
                    if (hours < 10) hours = "0" + hours;
                    seconds = seconds % 3600;
                    var minutes = Math.floor(seconds / 60);
                    if (minutes < 10) minutes = "0" + minutes;
                    seconds = Math.floor(seconds % 60);
                    if (seconds < 10) seconds = "0" + seconds;
                    var result = " <span class=\"digit\">" + days + "</span> d <span class=\"digit\">" + hours + "</span> h <span class=\"digit\">" + minutes + "</span> m <span class=\"digit\">" + seconds + "</span> s"; 
                    $("#clock").html(result);
                } else {
                    timeElapse(targetDate);
                }
                $await(Jscex.Async.sleep(1000));
            }
        }));

        runAsync().start();
    }
    </script>
</body>

</html>
